(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{2562:function(e,t,r){Promise.resolve().then(r.bind(r,1579))},1579:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),n=r(2265),s=r(7648),l=r(2451),i=r(4315),c=r(2489),o=r(9397),d=r(6679),u=r(5978),m=r(7293);async function x(e){var t;let r=(0,m.T)(),a=e.trim().toLowerCase();if(!r||!a)return[];let n=await (0,u.QT)((0,u.JU)(r,"stores",a));if(!n.exists())return[];let s=null===(t=n.data())||void 0===t?void 0:t.blockedLineIds;return Array.isArray(s)&&s.every(e=>"string"==typeof e)?s.filter(e=>e.trim()):[]}async function f(e,t){let r=(0,m.T)(),a=e.trim().toLowerCase();r&&a&&await (0,u.r7)((0,u.JU)(r,"stores",a),{blockedLineIds:t.filter(e=>e.trim())})}function h(){var e;let{storeIds:t,loading:r}=(0,d.dD)(),u=null!==(e=t[0])&&void 0!==e?e:"",[m,h]=(0,n.useState)([]),[y,p]=(0,n.useState)(!0),[b,g]=(0,n.useState)(!1),[N,w]=(0,n.useState)(""),v=(0,n.useCallback)(async()=>{if(!u){p(!1);return}p(!0);try{let e=await x(u);h(e)}finally{p(!1)}},[u]);(0,n.useEffect)(()=>{v()},[v]);let k=(0,n.useCallback)(async()=>{let e=N.trim();if(!e||m.includes(e)){w("");return}let t=[...m,e];h(t),w(""),g(!0);try{await f(u,t)}finally{g(!1)}},[N,m,u]),j=(0,n.useCallback)(async e=>{let t=m.filter((t,r)=>r!==e);h(t),g(!0);try{await f(u,t)}finally{g(!1)}},[m,u]);return r||!u?(0,a.jsx)("main",{className:"max-w-2xl mx-auto p-6 pb-24",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"読み込み中..."})}):(0,a.jsxs)("main",{className:"max-w-2xl mx-auto p-6 pb-24",children:[(0,a.jsxs)(s.default,{href:"/admin/settings",className:"inline-flex min-h-touch items-center gap-1 rounded-xl text-sm text-gray-600 hover:text-gray-900 mb-4","aria-label":"設定に戻る",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5","aria-hidden":!0}),"設定"]}),(0,a.jsxs)("h1",{className:"text-xl font-semibold text-gray-900 mb-1 flex items-center gap-2",children:["アクセスブロック",(0,a.jsx)(i.Z,{className:"h-5 w-5 text-gray-500","aria-hidden":!0})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"登録した LINE ID のユーザーには、ストアページへのアクセスと商品表示の両方がブロックされます（二重制限）。注文履歴の「LINEユーザーID」で確認できます。"}),y?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"読み込み中..."}):(0,a.jsxs)("section",{className:"rounded-2xl border border-gray-200 bg-white p-5",children:[(0,a.jsx)("h2",{className:"text-base font-semibold text-gray-900 mb-3",children:"ブロック中の LINE ID"}),0===m.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 py-2",children:"登録はありません"}):(0,a.jsx)("ul",{className:"space-y-2 mb-4",children:m.map((e,t)=>(0,a.jsxs)("li",{className:"flex min-h-touch items-center justify-between gap-2 rounded-xl border border-gray-200 bg-gray-50 px-4 py-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>j(t),className:"flex shrink-0 items-center justify-center rounded-xl p-2 text-gray-500 hover:bg-gray-200 hover:text-gray-800","aria-label":"".concat(e," を削除"),children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]},"".concat(e,"-").concat(t)))}),(0,a.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),k()),placeholder:"LINE ID を入力",className:"min-w-0 flex-1 rounded-xl border border-gray-300 px-4 py-3 text-base focus:border-[var(--admin-accent)] focus:outline-none focus:ring-2 focus:ring-[var(--admin-accent)]/30","aria-label":"追加する LINE ID"}),(0,a.jsx)("button",{type:"button",onClick:k,disabled:!N.trim()||b,className:"flex h-[46px] w-12 shrink-0 items-center justify-center rounded-xl border border-[var(--admin-accent)] bg-[var(--admin-accent)] text-white disabled:opacity-50 active:scale-[0.98]","aria-label":"追加",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})})]}),b&&(0,a.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"保存中..."})]})]})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:r,strokeWidth:c?24*Number(i)/Number(n):i,className:s("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,a.createElement)(i,{ref:l,iconNode:t,className:s("lucide-".concat(n(e)),c),...o})});return r.displayName="".concat(e),r}},2451:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4315:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[358,990,249,648,679,971,117,744],function(){return e(e.s=2562)}),_N_E=e.O()}]);