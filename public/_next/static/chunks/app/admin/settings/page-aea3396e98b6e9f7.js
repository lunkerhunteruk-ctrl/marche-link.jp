(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{8029:function(t,e,n){Promise.resolve().then(n.bind(n,2810))},2810:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=n(7437),i=n(7648),a=n(9376),c=n(9205);let l=(0,c.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),o=(0,c.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),u=(0,c.Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),s=(0,c.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var f=n(4315);let d=(0,c.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),h=(0,c.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),m=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var y=n(6942),p=n(8045);let w=[{href:"/admin/settings/payment",title:"支払い・受取方法",description:"PayPay・現金手渡し・銀行振込の有効化と案内文",Icon:l},{href:"/admin/settings/presets",title:"プリセット設定",description:"よく使う商品名・単位・カテゴリ",Icon:o},{href:"/admin/design",title:"ショップのデザイン",description:"配色プリセットで見た目を変更",Icon:u},{href:"/admin/settings/notifications",title:"新規注文のお知らせ",description:"「新規注文が届いてます！」の表示をオン・オフ",Icon:s},{href:"/admin/settings/blocked-access",title:"アクセスブロック",description:"LINE ID でストアへのアクセスと商品表示をブロック",Icon:f.Z},{href:"/admin/settings/about",title:"マルシェリンクについて",description:"よくある質問・サービス内容",Icon:d}];function g(){let t=(0,a.useRouter)(),{signOut:e}=(0,y.a)(),n=async()=>{(0,p.J2)(),await e(),t.push("/admin")};return(0,r.jsxs)("main",{className:"max-w-2xl mx-auto p-6 pb-24",children:[(0,r.jsxs)("h1",{className:"text-xl font-semibold text-gray-900 mb-1 flex items-center gap-2",children:["設定",(0,r.jsx)(o,{className:"h-5 w-5 text-gray-500","aria-hidden":!0})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"プリセット・デザインの設定"}),(0,r.jsx)("ul",{className:"space-y-3",children:w.map(t=>{let{href:e,title:n,description:a,Icon:c}=t;return(0,r.jsx)("li",{children:(0,r.jsxs)(i.default,{href:e,className:"flex min-h-touch items-center justify-between rounded-2xl border border-gray-200 bg-white p-5 shadow-sm active:scale-[0.99] transition-transform",children:[(0,r.jsxs)("span",{className:"flex items-start gap-3",children:[(0,r.jsx)(c,{className:"h-7 w-7 shrink-0 text-gray-500",strokeWidth:2,"aria-hidden":!0}),(0,r.jsxs)("span",{children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:a})]})]}),(0,r.jsx)(h,{className:"h-6 w-6 shrink-0 text-gray-400","aria-hidden":!0})]})},e)})}),(0,r.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,r.jsxs)("button",{type:"button",onClick:n,className:"flex min-h-touch w-full items-center justify-center gap-2 rounded-2xl border border-gray-200 bg-white px-5 py-4 text-gray-700 shadow-sm active:scale-[0.99] transition-transform hover:bg-gray-50","aria-label":"ログアウト",children:[(0,r.jsx)(m,{className:"h-5 w-5 text-gray-500",strokeWidth:2,"aria-hidden":!0}),(0,r.jsx)("span",{className:"font-medium",children:"ログアウト"})]})})]})}},31:function(t,e,n){"use strict";n.d(e,{Dj:function(){return m},G$:function(){return l},KC:function(){return h},SX:function(){return s},bm:function(){return u},hD:function(){return o},lG:function(){return d},p3:function(){return c},s1:function(){return a},tE:function(){return f}});var r,i=n(257);let a="2009034946-GQ1UQIRr".trim()||"2009034946-GQ1UQIRr",c=(null===(r=i.env.NEXT_PUBLIC_LIFF_ID_ADMIN_DIRECT)||void 0===r?void 0:r.trim())||"2009034946-LkF5LngF",l="https://liff.line.me/2009034946-LkF5LngF",o="2009034946-KaRhKY16".trim()||"2009034946-KaRhKY16",u="https://marche-link.jp/admin-entry/",s="https://marche-link.jp/admin/",f="marche-link-liff-inited",d="https://liff.line.me/".concat(a,"/"),h="https://liff.line.me/".concat(c,"/"),m="https://liff.line.me/".concat(o)},7293:function(t,e,n){"use strict";n.d(e,{E7:function(){return h},G5:function(){return d},T:function(){return m},V1:function(){return c.V1},lx:function(){return y}});var r=n(738),i=n(3301),a=n(5978),c=n(3491);let l={apiKey:"AIzaSyCa4s0nrtJe2PNf86c3843MVDsL6fpwljQ",authDomain:"marche-link.firebaseapp.com",projectId:"marche-link",storageBucket:"marche-link.firebasestorage.app",messagingSenderId:"1006467595458",appId:"1:1006467595458:web:ecf555e02bb7335e5dcf5b"},o=null,u=null,s=null,f=!1;function d(){if(!l.apiKey||!l.projectId)return null;if(o)return o;if(f)return null;try{let t=(0,r.C6)();return o=t.length>0?t[0]:(0,r.ZF)(l)}catch(t){return f=!0,"undefined"!=typeof console&&console.warn&&console.warn("[Firebase] 初期化に失敗しました",t),null}}function h(){try{let t=d();if(!t)return null;return u||(u=(0,i.v0)(t)),u}catch(t){return null}}function m(){try{let t=d();if(!t)return null;return s||(s=(0,a.ad)(t)),s}catch(t){return null}}function y(t){try{let e=d();if(!e)return null;return(0,c.$C)(e,null!=t?t:"asia-northeast1")}catch(t){return null}}},6942:function(t,e,n){"use strict";n.d(e,{a:function(){return u}});var r=n(2265),i=n(3301),a=n(7293),c=n(6515),l=n(31),o=n(8045);function u(){let[t,e]=(0,r.useState)(null),[n,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t;try{let n=(0,a.E7)();if(!n){u(!1);return}t=(0,i.Aj)(n,t=>{e(null!=t?t:null),u(!1)})}catch(t){e(null),u(!1)}return()=>{try{null==t||t()}catch(t){}}},[]),{user:t,loading:n,signInWithLine:async()=>{let t;let e="1"===new URLSearchParams(window.location.search).get("line_debug"),n=t=>{e&&"undefined"!=typeof alert&&alert(t)},r=(0,a.E7)();if(!r)throw Error("Firebase Auth が利用できません");try{await (0,c.$w)(l.p3)}catch(t){throw Error("LINE でログインしてください。LINE アプリ内で、管理画面の LIFF リンクから開き直すか、もう一度お試しください。")}let u=null;for(let t of[0,200,500,1e3])if(t>0&&await new Promise(e=>setTimeout(e,t)),u=await (0,c.Tc)())break;if(!u){if((0,c.DT)()){(0,c.Lq)(l.SX);return}throw Error("このページは LINE アプリ内で開く必要があります。リンクを LINE のトークに送り、そのリンクをタップして開いてください。")}n("1/4 LIFF IDトークン取得済み");let s=(0,a.lx)("asia-northeast1");if(!s)throw Error("Cloud Functions が利用できません");let f=(0,a.V1)(s,"getLineAuthCustomToken");try{t=await Promise.race([f({idToken:u}),new Promise((t,e)=>setTimeout(()=>e(Error("認証サーバーからの応答がありません。通信を確認して再試行してください。Cloud Functions のデプロイと LINE_CHANNEL_ID の設定を確認してください（docs/auth-server-no-response.md）。")),2e4))])}catch(t){throw n("2/4 失敗: "+(t instanceof Error?t.message:String(t))),t}n("2/4 カスタムトークン受信済み");let{customToken:d}=t.data;if(!d)throw n("3/4 失敗: customToken が空"),Error("認証に失敗しました");try{n("3/4 Firebase にサインイン中..."),await (0,i._p)(r,d)}catch(e){let t=e instanceof Error?e.message:String(e);if(n("3/4 失敗: "+t),t.includes("auth/api-key-not-valid"))throw Error("Firebase の API キーが無効です。LINE 内で開いている場合は、Google Cloud Console の API キー「HTTP リファラ」制限で LINE 由来のリクエストを許可するか、制限を「なし」にしてください。詳しくは docs/firebase-api-key-iphone.md");throw Error(t.includes("auth/")?"Firebase へのログインに失敗しました。再試行してください。":t)}n("4/4 ログイン完了"),(0,o.rZ)()},signOut:async()=>{let t=(0,a.E7)();t&&await (0,i.w7)(t)}}}},6515:function(t,e,n){"use strict";n.d(e,{$w:function(){return o},DT:function(){return u},Lq:function(){return f},Tc:function(){return h},cz:function(){return m},jl:function(){return s},lA:function(){return y},o$:function(){return d}});let r=null,i=null,a=!1,c=!1;async function l(){if(r)return r;try{return r=(await n.e(949).then(n.bind(n,2949))).default}catch(t){return null}}async function o(t){return(c||(c=!0,window.addEventListener("pagehide",()=>{i=null,r=null,a=!0})),i)?i:i=(async()=>{let e=t;window.location.pathname.startsWith("/admin")&&!window.location.pathname.startsWith("/admin-entry")&&(t.endsWith("KaRhKY16")||t.includes("KaRhKY16"))&&(e="2009034946-LkF5LngF");let n=await l();n&&(a||!n.id)&&(a&&(a=!1),await new Promise(t=>requestAnimationFrame(()=>t())),await n.init({liffId:e}))})().catch(t=>{throw i=null,t})}function u(){if(!r)return!1;try{return r.isInClient()}catch(t){return!1}}function s(){if(!r)return!1;try{return r.isLoggedIn()}catch(t){return!1}}function f(t){r&&r.login({redirectUri:t})}async function d(){var t;let e=await l();if(!e)throw Error("LIFF が利用できません");let n=await e.getProfile();return{userId:n.userId,displayName:null!==(t=n.displayName)&&void 0!==t?t:"",pictureUrl:n.pictureUrl}}async function h(){let t=await l();if(!t||"function"!=typeof t.getIDToken)return null;try{let e=await t.getIDToken();return e&&"string"==typeof e?e:null}catch(t){return null}}async function m(){let t=await l();if(!t||"function"!=typeof t.getDecodedIDToken)return null;try{let e=t.getDecodedIDToken();if((null==e?void 0:e.email)&&"string"==typeof e.email&&e.email.trim())return e.email.trim();return null}catch(t){return null}}function y(){(null==r?void 0:r.closeWindow)&&r.closeWindow()}},8045:function(t,e,n){"use strict";n.d(e,{J2:function(){return a},Mn:function(){return i},rZ:function(){return c}});let r="marche-link-admin-manual-logout";function i(){try{return"1"===window.localStorage.getItem(r)}catch(t){return!1}}function a(){try{window.localStorage.setItem(r,"1")}catch(t){}}function c(){try{window.localStorage.removeItem(r)}catch(t){}}},9205:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2265);let i=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((t,e,n)=>!!t&&""!==t.trim()&&n.indexOf(t)===e).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((t,e)=>{let{color:n="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:u="",children:s,iconNode:f,...d}=t;return(0,r.createElement)("svg",{ref:e,...c,width:i,height:i,stroke:n,strokeWidth:o?24*Number(l)/Number(i):l,className:a("lucide",u),...d},[...f.map(t=>{let[e,n]=t;return(0,r.createElement)(e,n)}),...Array.isArray(s)?s:[s]])}),o=(t,e)=>{let n=(0,r.forwardRef)((n,c)=>{let{className:o,...u}=n;return(0,r.createElement)(l,{ref:c,iconNode:e,className:a("lucide-".concat(i(t)),o),...u})});return n.displayName="".concat(t),n}},4315:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});let r=(0,n(9205).Z)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]])},9376:function(t,e,n){"use strict";var r=n(5475);n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})}},function(t){t.O(0,[358,990,249,648,971,117,744],function(){return t(t.s=8029)}),_N_E=t.O()}]);