(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{4568:function(e,t,a){Promise.resolve().then(a.bind(a,1680))},1680:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265),l=a(7648),n=a(2451),i=a(2489),c=a(9397),d=a(5978),o=a(7293),m=a(6679),x=a(4770);function u(){var e;let{storeIds:t,loading:a}=(0,m.dD)(),u=(null!==(e=t[0])&&void 0!==e?e:"").trim().toLowerCase(),[h,b]=(0,r.useState)(!1),[y,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,v]=(0,r.useState)(""),[k,C]=(0,r.useState)([]),[P,E]=(0,r.useState)(""),[S,Z]=(0,r.useState)(!0),[M,D]=(0,r.useState)(!1),[L,T]=(0,r.useState)(!1),A=(0,r.useCallback)(async()=>{if(!u){Z(!1);return}let e=(0,o.T)();if(!e){Z(!1);return}Z(!0);try{var t;let a=await (0,d.QT)((0,d.JU)(e,"stores",u)),s=a.exists()?a.data():{};b((null==s?void 0:s.paymentPayPayEnabled)===!0),p("string"==typeof(null==s?void 0:s.paymentPayPaySuffix)?s.paymentPayPaySuffix:""),g((null==s?void 0:s.paymentCashEnabled)!==!1),N((null==s?void 0:s.paymentBankEnabled)===!0),v("string"==typeof(null==s?void 0:s.paymentBankDetails)?s.paymentBankDetails:""),C((t=null==s?void 0:s.paymentCustomMethods,Array.isArray(t)?t.reduce((e,t)=>(t&&"object"==typeof t&&"string"==typeof t.label?t.label.trim()&&e.push({label:t.label.trim(),enabled:!0===t.enabled}):"string"==typeof t&&t.trim()&&e.push({label:t.trim(),enabled:!0}),e),[]):[]))}finally{Z(!1)}},[u]);(0,r.useEffect)(()=>{A()},[A]);let B=async e=>{if(e.preventDefault(),!u)return;let t=(0,o.T)();if(t){D(!0);try{let e=y.trim().replace(/^https:\/\/pay\.paypay\.ne\.jp\/?/i,"");await (0,d.r7)((0,d.JU)(t,"stores",u),{paymentPayPayEnabled:h,paymentPayPaySuffix:e,paymentCashEnabled:f,paymentBankEnabled:j,paymentBankDetails:w.trim(),paymentCustomMethods:k.map(e=>({label:e.label,enabled:e.enabled}))}),p(e),T(!0),setTimeout(()=>T(!1),2e3)}finally{D(!1)}}},U=()=>{let e=P.trim();if(!e||k.some(t=>t.label===e)){E("");return}let t=[...k,{label:e,enabled:!1}];if(C(t),E(""),!u)return;let a=(0,o.T)();a&&(D(!0),(0,d.r7)((0,d.JU)(a,"stores",u),{paymentCustomMethods:t.map(e=>({label:e.label,enabled:e.enabled}))}).finally(()=>D(!1)))},W=(e,t)=>{let a=k.map((a,s)=>s===e?{...a,enabled:t}:a);if(C(a),!u)return;let s=(0,o.T)();s&&(D(!0),(0,d.r7)((0,d.JU)(s,"stores",u),{paymentCustomMethods:a.map(e=>({label:e.label,enabled:e.enabled}))}).finally(()=>D(!1)))},_=e=>{let t=k.filter((t,a)=>a!==e);if(C(t),!u)return;let a=(0,o.T)();a&&(D(!0),(0,d.r7)((0,d.JU)(a,"stores",u),{paymentCustomMethods:t.map(e=>({label:e.label,enabled:e.enabled}))}).finally(()=>D(!1)))};return a||!u?(0,s.jsx)("main",{className:"max-w-2xl mx-auto p-6 pb-24",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"読み込み中..."})}):(0,s.jsxs)("main",{className:"max-w-2xl mx-auto p-6 pb-24",children:[(0,s.jsxs)(l.default,{href:"/admin/settings",className:"inline-flex min-h-touch items-center gap-1 rounded-xl text-sm text-gray-600 hover:text-gray-900 mb-4","aria-label":"設定に戻る",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5","aria-hidden":!0}),"設定"]}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-1",children:"支払い・受取方法"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"有効にした方法だけが、お客様の注文時・注文履歴に表示されます。"}),(0,s.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,s.jsxs)("section",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"PayPay"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:h,onChange:e=>b(e.target.checked),className:"h-5 w-5 rounded border-gray-300"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"有効"})]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["リンク支払いのURLの「",x.W,"」の後ろの部分だけ入力してください。"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"注文前にアドレスの詳細は表示されません。"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-xl border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"shrink-0",children:x.W}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>p(e.target.value),placeholder:"○○○○",className:"flex-1 min-w-0 bg-transparent py-1 text-gray-900 placeholder:text-gray-400 focus:outline-none","aria-label":"PayPayリンクの後ろの部分"})]})]}),(0,s.jsxs)("section",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"現金手渡し"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:f,onChange:e=>g(e.target.checked),className:"h-5 w-5 rounded border-gray-300"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"有効"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"受取時に現金で支払い可能であることを案内します。"})]}),(0,s.jsxs)("section",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"銀行振込"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"h-5 w-5 rounded border-gray-300"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"有効"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"振込先の詳細を記入すると、注文履歴でお客様に表示されます。"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"注文前に口座詳細は表示されません。"}),(0,s.jsx)("textarea",{value:w,onChange:e=>v(e.target.value),placeholder:"例： 〇〇銀行 △△支店 普通 1234567 名義 マルシェタロウ",className:"w-full rounded-xl border border-gray-300 px-3 py-2.5 text-base min-h-[120px]",rows:5,"aria-label":"振込先情報"})]}),(0,s.jsxs)("section",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900 mb-2",children:"その他の支払い・受取方法"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"自由に方法名を追加できます。例: 近々会った時に、追ってLINEでお知らせします など。追加後は「有効」にチェックを入れると注文時・注文履歴に表示されます。何件でも追加できます。"}),k.length>0&&(0,s.jsx)("ul",{className:"space-y-3 mb-3",children:k.map((e,t)=>(0,s.jsxs)("li",{className:"flex min-h-touch items-center justify-between gap-3 rounded-xl border border-gray-200 bg-gray-50/80 px-3 py-2.5",children:[(0,s.jsx)("span",{className:"min-w-0 flex-1 text-sm font-medium text-gray-900 truncate",children:e.label}),(0,s.jsxs)("label",{className:"flex shrink-0 items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:e=>W(t,e.target.checked),className:"h-5 w-5 rounded border-gray-300"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"有効"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>_(t),className:"flex shrink-0 items-center justify-center rounded-full p-1.5 text-gray-400 hover:bg-gray-200 hover:text-gray-600","aria-label":"".concat(e.label," を削除"),children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})]},"".concat(e.label,"-").concat(t)))}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),U()),placeholder:"例: 次回会った時に",className:"min-w-0 flex-1 rounded-xl border border-gray-300 px-4 py-2.5 text-base focus:border-[var(--admin-accent)] focus:outline-none focus:ring-2 focus:ring-[var(--admin-accent)]/30","aria-label":"追加する方法名"}),(0,s.jsx)("button",{type:"button",onClick:U,className:"flex h-11 w-11 shrink-0 items-center justify-center rounded-full border border-[var(--admin-accent)] bg-[var(--admin-accent)] text-white active:scale-[0.98]","aria-label":"追加",children:(0,s.jsx)(c.Z,{className:"h-5 w-5",strokeWidth:2.5})})]})]}),L&&(0,s.jsx)("p",{className:"text-sm text-green-700 bg-green-50 border border-green-200 rounded-xl px-4 py-2",role:"status",children:"保存しました。"}),(0,s.jsx)("button",{type:"submit",disabled:M,className:"w-full min-h-touch rounded-xl bg-[var(--admin-accent)] text-white font-medium py-3 active:scale-[0.98] disabled:opacity-50",children:M?"保存中…":"保存する"})]}),(0,s.jsx)("p",{className:"mt-6 text-sm text-gray-500",children:(0,s.jsx)(l.default,{href:"/admin/settings",className:"text-[var(--admin-accent)] underline",children:"設定に戻る"})})]})}},4770:function(e,t,a){"use strict";a.d(t,{W:function(){return r},t:function(){return s}});let s={primaryColor:"#6b7280",buttonColor:"#6b7280",headerColor:"#4b5563",backgroundColor:"#f9fafb",textColor:"#111827",fontFamily:"sans-serif"},r="https://pay.paypay.ne.jp/"},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",d),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:c,...d}=a;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e)),c),...d})});return a.displayName="".concat(e),a}},2451:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[358,990,249,648,679,971,117,744],function(){return e(e.s=4568)}),_N_E=e.O()}]);